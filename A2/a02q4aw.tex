\documentclass[12pt]{article}
\usepackage{amsmath}
\usepackage{amssymb}
\usepackage{graphicx}
\usepackage{ifthen,enumerate}
\usepackage{listings}
\usepackage{courier}
\usepackage{pdfpages}
\usepackage{../thm}
\usepackage[left=2cm,top=2cm,right=2cm]{geometry}
\title{Responses for CS240 Assignment 2 Question 1}
\author{Alfred Chan -- 20392255}

\begin{document}
\lstset{
	language=c,
	numbers=left,
	showspaces=false,
	showstringspaces=false,
	stepnumber=1,
	basicstyle=\ttfamily,
	frame=single,
	breaklines=true,
	tabsize=2
}
\maketitle
First, assume that ``book-keeping'' tests, like testing a counter range, are not considered in the number of comparisons of data. In particular, assume that only comparisons that test data within the target heap counts.
Consider a function that looks for the number of ancestors in a given node:
\begin{lstlisting}
num_ancestor_to_be_swapped(A[1..n], start)
	allocate indice[1..n]
	temp <- start
	size <- 0

	// look and store the parent of node i into the array ``indice''
	for i <- 1 to lg(start)
		indice[i] <- temp
		temp <- parent of temp
		size++

	low <- 0
	high <- size

	// look for the count with a binary search on the branch based on the array ``indice''
	while true
		pivot <- (low + high) / 2
		if high < low then break
		if A[start] > A[indice[pivot]]
			low <- pivot + 1
		else if A[start] < array[indice[pivot]]
			high <- pivot - 1
		else
			break

	// boundary case
	if array[parent of indice[pivot]] < array[start]
		return pivot + 1
	else
		return pivot
\end{lstlisting}
The number of comparisons of the above function is the following:
\begin{align*}
\text{inserting parents into indice} = O(1)\\
\text{binary search on a branch of the heap} = O(\lg\lg n)\\
\text{boundary case} = O(1)
\end{align*}
Therefore $num\_ancestor\_to\_be\_swapped$ needs $(\lg\lg n)$ comparisons.

Consider BubbleUp:
\begin{lstlisting}
BubbleUp(A[1..n], start)
	num <- num_ancestor_to_be_swapped(A, start)
	prev <- start
	for i <- 0 to num
		par <- parent(prev)
		swap elements par and prev in A
		prev <- par
\end{lstlisting}
The number of comparisons of data for $BubbleUp$ is the number in $num\_ancestor\_to\_be\_swapped$, which is $O(\lg\lg n)$ comparisons.

Finally, consider the insertion function:
\begin{lstlisting}
Insert(A[1..n], size, data) // the starter codes provides a MaxHeap class, so in the final implementation, only data is needed in the parameter
	A[size] <- data
	BubbleUp(A, size)
	size++ // assuming that ``size'' is pass-by-reference
\end{lstlisting}
The number of comparisons of data for $Insert$ is the number in $BubbleUp$, which is $O(\lg\lg n)$ comparisons.
But $O(\lg\lg n) \in o(\lg n)$, as required.
\hfill $\blacksquare$
\end{document}
